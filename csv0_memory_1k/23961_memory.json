{
    "search_index": {
        "description_for_embedding": "Glances integration: fixed CPU load sensor graphing by removing non-numeric unit and added support for additional CPU temperature sensors (AMD Opteron k10temp and ACPI thermal zone via Glances).",
        "keywords": [
            "home-assistant",
            "glances",
            "sensor",
            "CPU load",
            "unit of measurement",
            "15 min load",
            "graphing issue",
            "history graph",
            "CPU temperature",
            "k10temp",
            "Opteron x3216",
            "acpitz",
            "ACPI thermal zone"
        ]
    },
    "agent_memory": {
        "episodic_memory": "In the Home Assistant Glances integration, the `processor_load` sensor used the unit of measurement '15 min'. This non-standard, non-numeric unit prevented Home Assistant from treating it as a proper numeric metric for history graphs and visualizations. Additionally, systems with specific CPU temperature sources (AMD Opteron x3216 via k10temp and ACPI thermal zone sensors via acpitz) were not recognized by the Glances sensor integration, so their CPU temperature values never showed up as entities.\n\nTo fix this, the PR changed the sensor configuration for `processor_load` in `homeassistant/components/glances/sensor.py` so that its unit of measurement is an empty string instead of '15 min', allowing Home Assistant to treat it as a numeric value that can be graphed. In the same file, inside the `async_update` method, the list of recognized CPU temperature sensor names was extended to include \"k10temp 1\" and \"acpitz 1\". When Glances reports sensors with these names, their `value` is now used as the CPU temperature state.\n\nThe net effect is that the CPU load sensor is now graphable in Home Assistant, and CPU temperature readings are available for systems using the Opteron k10temp driver and ACPI thermal zones exposed via Glances.",
        "semantic_memory": "Home Assistant uses the `unit_of_measurement` field to infer how to treat sensor values, including whether they can be graphed as numeric series. Non-standard or textual units (like '15 min') can cause an otherwise numeric sensor to be mishandled or excluded from certain visualizations. To ensure numeric graphing, units should either be standard (e.g., '%', 'Â°C') or omitted (empty string) where a specific unit is not required, as long as the numeric nature is preserved.\n\nIntegrations that map external system metrics (e.g., from Glances, SNMP, or OS-level APIs) often rely on hardcoded sets of sensor names to identify CPU temperatures, load, or other metrics. If new hardware, drivers, or naming conventions appear (e.g., AMD k10temp, ACPI 'acpitz'), the integration may fail to detect temperatures, even though the underlying data is available. Periodically revisiting and expanding the list of recognized sensor identifiers is necessary to keep support current across hardware variations.\n\nIn general, when adding support for hardware sensors: (1) ensure that the identifier strings reported by the external service are correctly matched; (2) avoid overly rigid assumptions about sensor names; and (3) keep units consistent and compatible with the consuming platform's expectations, especially for graphing and automations.",
        "procedural_memory": [
            "When a Home Assistant sensor based on an external metrics provider (like Glances) is not graphing properly or missing on certain hardware, verify both the unit_of_measurement and the list of recognized sensor names.",
            "Step 1: Reproduce the issue by inspecting the sensor in Home Assistant. Check whether the value updates correctly but does not appear on history graphs or charts, or whether the sensor entity is missing altogether.",
            "Step 2: In Developer Tools -> States, inspect the sensor attributes. Confirm the `state` is numeric and examine the `unit_of_measurement`. If the unit is unusual (e.g., '15 min') or non-standard, it may prevent proper graphing.",
            "Step 3: Review the integration code (e.g., `homeassistant/components/<integration>/sensor.py`) to see how the problematic sensor is defined in any sensor mapping dicts or classes. Check what unit is assigned and whether it matches Home Assistant conventions.",
            "Step 4: If the unit is textual or non-standard but the sensor should be graphed as a numeric value, change `unit_of_measurement` to a standard unit or to an empty string (`''`) to let Home Assistant handle it as a generic numeric sensor.",
            "Step 5: For missing sensors (e.g., CPU temperature not appearing), inspect the external service directly (e.g., run Glances or query its API) and note the exact sensor names, like 'k10temp 1' or 'acpitz 1'.",
            "Step 6: In the integration code where sensors are filtered or matched (e.g., within `async_update` loops or sensor discovery logic), locate the list of recognized sensor names. Compare it with the actual names from the external service.",
            "Step 7: Add the new sensor identifiers to the recognized list (e.g., append 'k10temp 1' and 'acpitz 1' to the CPU temperature name checks) so that the integration will map those external metrics to Home Assistant sensor states.",
            "Step 8: Restart Home Assistant or reload the integration, then verify that the sensors now appear and update correctly, and that the previously non-graphing sensor now shows up in history graphs.",
            "Step 9: Add tests if the integration has coverage for sensor mapping (e.g., ensure new sensor names are correctly handled and that sensors with empty or updated units still behave as expected).",
            "Step 10: Document newly supported hardware or sensor types so users with similar systems (e.g., AMD Opteron, ACPI thermal zones) know that their metrics should now be visible."
        ]
    }
}