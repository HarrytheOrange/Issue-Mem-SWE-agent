{
    "search_index": {
        "description_for_embedding": "GitHub Actions stale bot was not closing old issues because it hit the default operations-per-run API limit (30 requests). The fix increases the operations-per-run setting to 1000 in the stale.yml workflow so the bot can process more issues per run without hitting the cap.",
        "keywords": [
            "GitHub Actions",
            "stale bot",
            "operations-per-run",
            "API request limit",
            "GitHub rate limiting",
            "workflow configuration",
            "issues not closing",
            "optuna",
            ".github/workflows/stale.yml"
        ]
    },
    "agent_memory": {
        "episodic_memory": "In this incident, the project had recently enabled a GitHub Actions stale bot to automatically close old issues and pull requests. However, no stale tickets were being closed. Investigation suggested that the stale bot was hitting its default operations-per-run cap of 30 API operations, which prevented it from processing all targeted issues in a single daily run. Since the job runs once per day and the repository uses its own token, it could safely make up to 5000 API requests per hour according to GitHub's rate limits. To resolve the problem, the stale bot workflow configuration in .github/workflows/stale.yml was updated to explicitly set `operations-per-run: 1000`. This change allows the bot to perform up to 1000 operations per run, enabling it to close stale issues as intended.",
        "semantic_memory": "Automation failures in GitHub Actions-based bots (e.g., stale bots, labelers) are often caused not by code errors but by conservative default limits in the action configuration, such as maximum operations per run, items per page, or timeouts. When a repository has accumulated many issues or pull requests, default caps (like 30 operations-per-run) can prevent the bot from processing enough items to have any noticeable effect. Because GitHub's API rate limit for authenticated requests is relatively high (e.g., 5000 requests per hour), workflows that run infrequently (e.g., once per day) can safely increase per-run operation limits. A best practice is to explicitly configure these limits based on repository size and run frequency, monitor behavior after changes, and then adjust downward once the backlog is cleared to reduce unnecessary API usage.",
        "procedural_memory": [
            "Step-by-step instructions on how to diagnose and fix similar issues.",
            "Step 1: Observe the symptom. Notice that your GitHub Actions automation (e.g., stale bot) appears to run successfully but is not performing the expected actions, such as closing or labeling old issues and pull requests.",
            "Step 2: Inspect the workflow runs. Go to the Actions tab in GitHub, open recent runs for the relevant workflow, and review logs for warnings about hitting operation limits, rate limits, or early termination after processing a small number of items.",
            "Step 3: Check the action’s documentation. Read the GitHub Action’s README (e.g., actions/stale) to identify configuration options that constrain work per run, such as `operations-per-run`, `days-before-stale`, `days-before-close`, or pagination parameters.",
            "Step 4: Compare defaults with your repository scale. Estimate how many issues/PRs the bot needs to process in a typical run. If the default operations-per-run (e.g., 30) is lower than the number of items needing processing, the bot may be effectively capped.",
            "Step 5: Verify API rate limits and credentials. Confirm that the workflow uses an appropriate token (e.g., GITHUB_TOKEN or a PAT) and check GitHub’s API rate limit (usually 5000 requests/hour for authenticated requests). Ensure your workflow schedule (e.g., once per day) leaves enough margin under this limit when increasing operations-per-run.",
            "Step 6: Update the workflow configuration. Edit the relevant workflow file (e.g., .github/workflows/stale.yml) and explicitly set a higher limit, such as:\n  - `operations-per-run: 1000`\nChoose a value that allows processing your backlog while staying comfortably below rate limits.",
            "Step 7: Commit and push the change. Commit the updated YAML file and push it to the default branch so the next scheduled run uses the new configuration.",
            "Step 8: Monitor subsequent runs. After the next scheduled workflow execution, check logs and repository activity to confirm that stale issues/PRs are being processed and closed as expected, and that no rate limit errors occur.",
            "Step 9: Tune the limit over time. Once the backlog of stale items is cleared, consider reducing `operations-per-run` to a more conservative value that still keeps up with new activity while minimizing unnecessary API usage.",
            "Step 10: Document the configuration rationale. Add comments in the workflow YAML or project docs explaining why the operations-per-run value was chosen and under what conditions it should be revisited."
        ]
    }
}