{
    "search_index": {
        "description_for_embedding": "GitHub Actions workflow added to automatically post a link to documentation built by CircleCI. The workflow listens to the `status` event, uses larsoner/circleci-artifacts-redirector-action with the GitHub token, CircleCI job name `document`, and the docs artifact path `0/docs/build/html/index.html` to surface the docs URL on PRs. Discussion covers why `status` is used instead of `push`, and that the workflow only fully works once merged to the default branch.",
        "keywords": [
            "GitHub Actions",
            "CircleCI",
            "documentation link",
            "artifacts",
            "status event",
            "workflow trigger",
            "circleci-artifacts-redirector-action",
            "continuous integration",
            "doc-link",
            "Optuna"
        ]
    },
    "agent_memory": {
        "episodic_memory": "In this incident, the repository’s documentation was built on CircleCI and stored as artifacts, but there was no automated way for contributors to access the built docs from the GitHub UI. A new GitHub Actions workflow, `Add Documentation Link`, was introduced in `.github/workflows/doc-link.yml` to fix this.\n\nThe workflow is triggered by the `status` event, which fires when external CI providers like CircleCI update commit statuses. The job `doc-link` runs on `ubuntu-latest` and uses the third-party action `larsoner/circleci-artifacts-redirector-action@master` with the following configuration:\n- `repo-token: ${{ secrets.GITHUB_TOKEN }}` so the action can interact with the GitHub API.\n- `artifact-path: 0/docs/build/html/index.html` pointing to the HTML docs index built by CircleCI.\n- `circleci-jobs: document` indicating the CircleCI job that produces the documentation artifact.\n\nThere was a discussion about the workflow being triggered frequently. Each CI job emits at least two statuses (pending and success), and with 16 CI jobs, this results in up to 32 status events per commit, hence 32 potential workflow runs. The maintainer questioned whether `on: push` could be used instead to reduce frequency, but it was clarified that the redirector action depends on commit status updates from CircleCI to resolve the artifact URL, making the `status` event necessary.\n\nAnother important detail is a GitHub Actions constraint: workflows triggered by `status` events only run if the workflow file is present on the default branch (e.g., `master`). Therefore, this PR had to be merged before the action could actually start functioning in the main repo. A minor follow-up commit adjusted the YAML indentation for the steps under the job (a \"dedent\" change) to align with expected formatting.",
        "semantic_memory": "When external CI systems (like CircleCI) build artifacts such as documentation, it’s often useful to surface direct links to those artifacts in GitHub (for example, on pull requests). One pattern is to use GitHub Actions as a bridge: listen to `status` events emitted when the external CI updates commit statuses, then call a helper action that can discover and link to CI artifacts.\n\nKey concepts/generalizations:\n- **Using `status` events for external CI integration**: External CI services typically report build results via commit statuses. A GitHub Actions workflow triggered by `on: status` can react precisely when the external build finishes. This is particularly suitable when you need information that is only available after the external CI finishes (like artifact URLs).\n- **Artifact redirector actions**: Actions like `larsoner/circleci-artifacts-redirector-action` encapsulate the logic for querying CircleCI APIs, finding specific artifacts, and posting a link back to GitHub (e.g., as a check, comment, or status). These actions usually need a GitHub token and CI-specific parameters (job names, artifact paths).\n- **Trade-offs of `status` vs `push` / `pull_request` triggers**: `status` can fire many times (e.g., pending, success, failure per job), especially with matrices or many CI jobs. This can increase workflow runs and logs, but in return provides tight coupling with external CI completion. Triggers like `push`/`pull_request` run less frequently but might not have the information needed to locate external artifacts that are pegged to specific status updates.\n- **GitHub Actions default-branch limitations**: Some events, like `status`, only trigger workflows when the workflow file is already on the default branch. That means feature branches introducing such workflows won’t see them fully working until after merge. This is a subtle but important behavior when testing new workflows.\n- **Configuration details matter**: For workflows that operate on CI artifacts, correct job names (`circleci-jobs`) and artifact paths (`artifact-path`) are essential. Misconfiguration will result in silent failures or missing links even if the workflow runs successfully.\n\nOverall, this PR demonstrates a reusable integration pattern: wiring GitHub Actions to external CI via status events to expose build artifacts (documentation, test reports, etc.) in the GitHub UI.",
        "procedural_memory": [
            "To set up a GitHub Action that posts a link to documentation (or other artifacts) built by an external CI system like CircleCI, or to troubleshoot similar behavior, follow these steps:",
            "Step 1: Ensure CI produces and stores the needed artifacts\n- Confirm that your external CI (e.g., CircleCI) builds the documentation and saves the result as an artifact.\n- Identify the exact artifact path (e.g., `0/docs/build/html/index.html`) and the job name that produces it (e.g., `document`).\n- Verify manually via the CI UI/APIs that the artifact is accessible after a successful build.",
            "Step 2: Choose the appropriate GitHub Actions trigger\n- If your external CI posts commit statuses (common with CircleCI, Travis CI, etc.), use `on: status` for tight integration.\n- Understand that `status` may trigger multiple times (pending/success/failure for each job). Expect multiple workflow runs for a single commit if you have many CI jobs.\n- Recognize that workflows triggered by `status` only run when the workflow file is present on the default branch (`master`/`main`). Plan to merge first before expecting full behavior.",
            "Step 3: Add the workflow file\n- Create `.github/workflows/doc-link.yml` (or similar) in your repository.\n- Define the workflow using a job that runs on a Linux runner:\n  ```yaml\n  name: Add Documentation Link\n\n  on: status\n\n  jobs:\n    doc-link:\n      runs-on: ubuntu-latest\n      steps:\n        - uses: larsoner/circleci-artifacts-redirector-action@master\n          with:\n            repo-token: ${{ secrets.GITHUB_TOKEN }}\n            artifact-path: 0/docs/build/html/index.html\n            circleci-jobs: document\n  ```\n- Make sure the YAML indentation is valid: `steps:` is a mapping key and the list items (`- uses: ...`) must be indented as children of `steps`.",
            "Step 4: Provide required secrets and permissions\n- Ensure `GITHUB_TOKEN` (automatically provided by GitHub) has sufficient permissions; usually the default is enough for posting comments/statuses.\n- If the redirector action or similar tools require additional secrets (e.g., CircleCI token), add them to the repository settings under `Settings > Secrets` and reference them in the workflow if necessary.",
            "Step 5: Merge to default branch and validate\n- Merge the workflow into your default branch so that `status` events will start triggering it.\n- Push a commit or open/update a pull request that kicks off the external CI.\n- After the CI run completes, check the Actions tab and PR page to see if the documentation link is posted as expected.",
            "Step 6: Diagnose frequent or missing runs\n- If the workflow is running too often:\n  - Count how many CI jobs you have and understand that each job may emit multiple statuses (pending, success, failure).\n  - Consider whether this frequency is acceptable, or if you need custom filtering logic inside the workflow (e.g., checking the context of the status payload and exiting early for irrelevant jobs).\n- If the workflow is not running at all:\n  - Confirm the workflow file is on the default branch.\n  - Check that the repository has external CI statuses configured (e.g., CircleCI is posting statuses to GitHub).\n  - Inspect the Actions logs for any YAML syntax or runtime errors.",
            "Step 7: Adjust configuration as needed\n- If the doc link does not point to the correct artifact, double-check `artifact-path` and `circleci-jobs` against your CircleCI configuration.\n- Update the workflow file and re-run to test.\n- Consider adding comments or documentation in the workflow file explaining why `on: status` is required, to avoid future confusion about the trigger choice."
        ]
    }
}