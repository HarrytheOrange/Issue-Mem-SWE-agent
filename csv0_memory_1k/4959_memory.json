{
    "search_index": {
        "description_for_embedding": "Windows batch installer for PokemonGo-Bot was updated to smooth UX, centralize echo formatting, preserve user config files (including auth.json) during reinstall, and add an option to run PokemonGo-Bot-Configurator automatically at the end of installation.",
        "keywords": [
            "PokemonGo-Bot-Install.bat",
            "Windows installer",
            "batch script",
            "auth.json backup",
            "config.json",
            "userdata.js",
            "PokemonGo-Bot-Configurator",
            "post-install configuration",
            "installer UX",
            "configuration preservation"
        ]
    },
    "agent_memory": {
        "episodic_memory": "In this change set, the Windows installer script `PokemonGo-Bot-Install.bat` for PokemonGo-Bot was refactored and enhanced. Previously, the script contained many repeated `@ECHO.` lines for blank spacing, did not consistently mention or preserve the `auth.json` configuration file during backup/restore, and did not give users a streamlined way to launch the PokemonGo-Bot-Configurator after installation.\n\nThe PR introduced a small helper label `:ech` that prints two blank lines and is invoked via `call:ech` throughout the script to reduce repetition and improve readability. All `@ECHO.` spacer lines were largely replaced by `call:ech` calls, making layout changes easier to maintain.\n\nFunctionally, the installer’s backup and restore phases were improved. In the 'Creating Backup' stage, the script now checks for `%PGBotPath%\\configs\\auth.json` and copies it to the download/backup path (alongside `config.json` and `userdata.js`). In the restore phases, the script now restores `auth.json` from either `%~dp0auth.json` or `%DownPath%\\auth.json` into `%PGBotPath%\\configs\\`. Previously, `auth.json` could be effectively lost or require manual recreation when reinstalling or updating via this installer.\n\nThe final instructions section was updated to explicitly mention `auth.json` and clarify that users must configure `auth.json`, `config.json`, and `userdata.js`. URLs to the relevant documentation remain, but messaging was streamlined and grouped more clearly.\n\nFinally, the script now offers a post-install prompt to run the `PokemonGo-Bot-Configurator`. After the final instructions, the user is told they can configure `auth.json` and `userdata.js` immediately. The script then asks: `Do you want to start the PokemonGo-Bot-Configurator (Y/N):`. On `y`, it calls `%PGBotPath%\\windows_bat\\PokemonGo-Bot-Configurator.bat`; on `n`, it exits. This provides a better onboarding flow for new users who may not know how to configure their files manually.\n\nOverall, the incident was not a crash bug but a combination of UX/maintainability improvements and a subtle configuration persistence issue (missing `auth.json` backup/restore) that could inconvenience users during updates.",
        "semantic_memory": "General lessons from this change:\n\n1. **Preserve user configuration across installs/updates**: Any installer or upgrade script should explicitly back up and restore all critical user config files (e.g., `auth.json`, `config.json`, `userdata.js`) to avoid data loss and reconfiguration friction. Overlooking even one file can have outsized impact because credentials or keys are often stored separately from general config.\n\n2. **Centralize repetitive UI/formatting logic in scripts**: Batch scripts and similar automation often contain repeated patterns (like blank `echo` lines). Introducing small helper labels or functions (`:ech`) avoids duplication, reduces visual noise, and makes future changes safer and more consistent.\n\n3. **Provide post-install guidance and automation**: After a successful install, users benefit from clear instructions and optional automation. Prompting to run a configuration tool immediately (e.g., `PokemonGo-Bot-Configurator`) lowers the barrier to first use and reduces setup errors.\n\n4. **Improve log and messaging clarity**: Echoed messages should describe exactly what’s happening (downloading dependencies, backing up configs, restoring files) and clearly state next steps. This is especially important for CLI/console installers where users rely solely on text feedback.\n\n5. **Conditional operations based on file existence**: For backup/restore flows, always guard copy operations with `IF EXIST` checks and log both the positive and negative cases. This makes the process robust even if some files are missing and helps diagnose misconfigurations.\n\n6. **Separate platform/install prerequisites from application configuration**: The script clearly separates installing dependencies (Python, Git, Visual C++ runtime) from installing the bot itself and from configuring the bot. Maintaining that separation but tying them together with prompts (\"install now\", \"configure now\") provides a cleaner mental model for users.",
        "procedural_memory": [
            "When improving or fixing an installer/upgrade script that handles user configuration, follow this general process:",
            "Step 1: Enumerate all critical configuration files and secrets.",
            "  - Identify all files that store credentials, API keys, or user-specific settings (e.g., `auth.json`, `config.json`, `userdata.js`).",
            "  - Confirm their locations in the installation directory structure.",
            "Step 2: Audit backup and restore logic.",
            "  - Review existing backup sections (e.g., 'Creating Backup') to see which files are preserved.",
            "  - Add `IF EXIST <path> ( COPY ... ) ELSE ( ECHO.No <file> )` blocks for any missing critical files.",
            "  - Ensure backup paths are consistent (e.g., a dedicated `%DownPath%` or temp directory).",
            "Step 3: Implement symmetrical restore behavior.",
            "  - For every file you back up, add a corresponding restore block after reinstallation or update.",
            "  - Handle multiple possible backup locations if needed (for example, `%~dp0` vs `%DownPath%`).",
            "  - Keep restore logic safe with `IF EXIST` guards to avoid errors when files are absent.",
            "Step 4: Refactor repetitive output or logic.",
            "  - Identify repeated `ECHO` patterns used purely for spacing or formatting.",
            "  - Extract them into a helper label (e.g., `:ech`) that prints the desired spacing.",
            "  - Replace repeated blocks with calls like `call:ech` for consistency and easier future changes.",
            "Step 5: Clarify and enhance user-facing messages.",
            "  - Update instructions to mention all relevant config files explicitly, not just some of them.",
            "  - Provide URLs or references to documentation where users can learn how to configure each file.",
            "  - Make post-install steps clear, e.g., where to place encrypt libraries, how to get API keys.",
            "Step 6: Add optional post-install automation (configurator).",
            "  - If a configuration tool or script exists, provide a prompt at the end of installation asking whether to run it now.",
            "  - Implement a simple `SET /p` prompt and conditionally `call` the configurator on affirmative responses.",
            "  - Ensure that declining (`n`) cleanly exits without side effects.",
            "Step 7: Test full install and upgrade flows.",
            "  - Run a clean install scenario and verify prerequisite downloads/installs and bot installation.",
            "  - Run an upgrade path where config files already exist and confirm they are backed up and restored correctly (including new ones like `auth.json`).",
            "  - Test both 'yes' and 'no' paths for the configurator prompt and verify behavior.",
            "Step 8: Validate logging and error transparency.",
            "  - Check the log file to ensure it records each backup, restore, and download action.",
            "  - Confirm that missing-file cases are logged clearly so users or maintainers can diagnose why configuration did or did not carry over."
        ]
    }
}