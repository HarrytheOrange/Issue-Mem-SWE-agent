{
    "search_index": {
        "description_for_embedding": "Fixed inconsistent metric naming in Home Assistant systemmonitor sensor by renaming 'processor_use' to 'processor_use_percent' to match other *_percent metrics and updating the corresponding logic in the update method.",
        "keywords": [
            "Home Assistant",
            "systemmonitor",
            "sensor",
            "processor_use",
            "processor_use_percent",
            "metric naming",
            "naming consistency",
            "breaking change",
            "configuration key",
            "percent metrics"
        ]
    },
    "agent_memory": {
        "episodic_memory": "In the Home Assistant systemmonitor sensor component, the CPU usage metric was defined with an inconsistent name compared to other percentage-based metrics. The sensor type mapping used the key 'processor_use' while other percentage metrics (like swap_use_percent) followed a '*_percent' naming convention. This inconsistency surfaced when displaying metrics on graphs and comparing memory use percentage and CPU use percentageâ€”CPU did not follow the same naming pattern, which could confuse users and integrations. The fix renamed the sensor key from 'processor_use' to 'processor_use_percent' in the SENSOR_TYPES dictionary and updated the associated conditional branch in the sensor's update method to check for 'processor_use_percent' instead of 'processor_use'. This made the CPU usage naming consistent with other percentage metrics.",
        "semantic_memory": "Consistent naming conventions for metrics and configuration keys are crucial for usability, maintainability, and integration with other tools (like dashboards and graphs). Percentage values should follow a clear, predictable pattern (e.g., adding a '_percent' suffix) that matches related metrics. When a system offers many similar metrics, even small deviations in naming can cause confusion, misconfiguration, or break automations and visualizations that rely on pattern-based matching. Fixing such issues often requires updating both the data definition (e.g., a sensor type registry/dictionary) and all logic that references those keys to avoid mismatches. Developers should treat naming conventions as part of the public API: changing a key without careful consideration can be a breaking change for users who reference that name in configuration or code.",
        "procedural_memory": [
            "When diagnosing metric naming inconsistencies or related bugs, start by comparing all similar metrics (e.g., all percentage-based sensors) and list their keys and labels.",
            "Step 1: Identify the inconsistent key or label. Look at the registry or configuration structure (e.g., a SENSOR_TYPES dictionary) that defines metric names, units, and icons. Compare the target metric (like CPU usage) with similar metrics (like memory or swap percentage) and note naming differences.",
            "Step 2: Decide on a consistent naming convention. For example, ensure all percentage-based metrics end with '_percent' or another clear suffix. Verify that this convention matches existing majority usage in the codebase to minimize disruption.",
            "Step 3: Update the central definition. Rename the key in the metric definition structure (e.g., change 'processor_use' to 'processor_use_percent') and adjust its display name if necessary to clearly indicate that it represents a percentage.",
            "Step 4: Update all references. Search the codebase for all usages of the old key (e.g., 'processor_use') and change them to the new key (e.g., 'processor_use_percent'). This includes conditionals in update methods, configuration schemas, and any other logic that branches based on the metric type.",
            "Step 5: Run tests and validate behavior. Ensure existing tests pass or update them to reference the new key. Manually verify that the sensor still reports values correctly and appears as expected in dashboards or graphs.",
            "Step 6: Consider backward compatibility. If the key is part of a public configuration or API, assess whether this is a breaking change. If necessary, add migration logic (e.g., supporting both old and new keys temporarily) or document the change clearly in release notes.",
            "Step 7: Communicate the convention. Document the naming pattern (such as '*_percent' for percentage metrics) in developer or contributor guidelines to prevent similar inconsistencies from being introduced in the future."
        ]
    }
}