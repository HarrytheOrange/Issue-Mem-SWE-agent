{
    "search_index": {
        "description_for_embedding": "Home Assistant PR deprecating the Xfinity Gateway device_tracker integration because it relies on web scraping, which is disallowed per ADR-0004. The change adds a runtime warning log in get_scanner() informing users the integration will be removed in version 0.109 and should be removed from configuration.",
        "keywords": [
            "Home Assistant",
            "Xfinity Gateway",
            "xfinity integration",
            "device_tracker",
            "web scraping deprecation",
            "ADR-0004",
            "breaking change",
            "deprecation warning",
            "integration removal",
            "logging"
        ]
    },
    "agent_memory": {
        "episodic_memory": "In this pull request, the Home Assistant team deprecated the Xfinity Gateway integration because it relied on web scraping, which violates Architecture Decision Record ADR-0004 that disallows web scraping in integrations. Instead of immediately removing the integration (which would silently break existing setups), the change introduces a deprecation warning that is logged whenever the integration's device tracker is initialized. Specifically, in homeassistant/components/xfinity/device_tracker.py, the get_scanner(hass, config) function now logs a warning with _LOGGER.warning stating that the Xfinity Gateway integration is deprecated, will be removed in Home Assistant 0.109, and should be removed from the user configuration. No functional behavior of the integration is altered in this PR; its purpose is to proactively notify users and give them time to adjust before the breaking removal occurs in a future release.",
        "semantic_memory": "When an integration or feature relies on patterns that become architecturally disallowed (such as web scraping in Home Assistant, per ADR-0004), the recommended approach is to follow a structured deprecation process rather than abrupt removal. This includes: (1) deciding at the architecture level that a pattern is forbidden, (2) marking affected integrations as deprecated, (3) adding runtime warnings that clearly inform users about the deprecation, the version in which removal will happen, and what action they should take (e.g., remove or migrate their configuration), and only then (4) eventually removing the integration in a future breaking release. Logging a deprecation warning at integration setup (or other entry point) is a practical way to reach all active users of that integration. This pattern balances architectural integrity (removing disallowed techniques like web scraping) with user experience by providing a clear migration path and timeline. It is also a good practice to coordinate documentation updates and issue references so users can understand the rationale and alternatives.",
        "procedural_memory": [
            "Step-by-step instructions on how to diagnose and fix similar issues (deprecated or architecturally disallowed integrations):",
            "Step 1: Identify the architectural violation or policy conflict.\n- Review architecture decision records (ADRs) or project guidelines (e.g., \"no web scraping\" integration rule).\n- Audit existing integrations for violations (such as HTML parsing of web pages instead of using official APIs).",
            "Step 2: Confirm the deprecation decision with maintainers.\n- Open or reference an issue describing the violation and proposed deprecation.\n- Get buy-in from code owners and core maintainers that the integration should be deprecated and scheduled for removal.",
            "Step 3: Introduce a clear runtime deprecation warning.\n- Locate the integration's main entry point where it is always executed when configured (e.g., setup(), async_setup_entry(), get_scanner(), or equivalent).\n- Add a log statement at WARNING level that:\n  - Names the integration clearly.\n  - States that it is deprecated.\n  - Specifies the future version where removal will occur.\n  - Tells users what to do (e.g., \"Please remove it from your configuration\").\n- Example in Home Assistant style:\n  - _LOGGER.warning(\"The <IntegrationName> has been deprecated and will be removed from Home Assistant in version X.YY. Please remove it from your configuration.\")",
            "Step 4: Avoid changing functionality during initial deprecation.\n- Do not break existing behavior in the deprecation PR unless strictly necessary.\n- The immediate goal is user notification; actual removal should occur in a later, clearly marked breaking change release.",
            "Step 5: Update documentation and release notes.\n- Add or update docs to mark the integration as deprecated.\n- Ensure release notes mention the deprecation, the reason (e.g., ADR-0004, no web scraping), and the removal version.\n- Link to any ADR or design docs that explain the policy.",
            "Step 6: Plan and implement removal in a subsequent release.\n- After at least one release cycle with warnings, remove the integration code and related configuration schema.\n- Clean up references in manifests, documentation, and tests.\n- Again, highlight the removal as a breaking change in release notes.",
            "Step 7: For future integrations, enforce architectural rules early.\n- During code review of new integrations, check for forbidden patterns (e.g., web scraping instead of APIs).\n- Reject or request refactors before merging, to avoid having to deprecate soon after introduction."
        ]
    }
}