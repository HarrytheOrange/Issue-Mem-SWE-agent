{
    "search_index": {
        "description_for_embedding": "UI regression fix in napari: revert dock widgets to be non-tabbed by default in the Qt main window. The `_add_viewer_dock_widget` helper now uses `tabify=False` so new dock widgets appear as separate panes instead of tabbed docks, restoring pre-#2080 behavior. Release note updated for version 0.4.3.",
        "keywords": [
            "napari",
            "Qt",
            "dock widget",
            "tabbed dock",
            "non-tabbed dock",
            "QtViewerDockWidget",
            "qt_main_window.py",
            "UI regression",
            "default behavior change",
            "layout preferences"
        ]
    },
    "agent_memory": {
        "episodic_memory": "In this incident, users reported that dock widgets in napari started opening as tabbed docks by default, which was a change in behavior introduced around PR #2080. Previously, dock widgets would appear as separate, non-tabbed panes in the Qt main window. This new tabbed behavior was not yet configurable and some users (@haesleinhuepf and @jni) requested a revert to the old behavior.\n\nThe cause was a default argument in the `_add_viewer_dock_widget` method in `napari/_qt/qt_main_window.py`. The method signature was `def _add_viewer_dock_widget(self, dock_widget: QtViewerDockWidget, tabify=True)`, which made any dock widget added via this helper get tabified by default. The fix was straightforward: the default value of the `tabify` parameter was changed from `True` to `False`, i.e.\n\n- Before: `def _add_viewer_dock_widget(self, dock_widget: QtViewerDockWidget, tabify=True)`\n- After:  `def _add_viewer_dock_widget(self, dock_widget: QtViewerDockWidget, tabify=False)`\n\nThis restored the previous behavior where dock widgets are non-tabbed unless explicitly requested to be tabbed. A corresponding release note line was added to `docs/release/release_0_4_3.md`: \"Make dock widgets non-tabbed (#2096)\", documenting the behavior change in the 0.4.3 release.",
        "semantic_memory": "This case illustrates a common UI/UX issue: changing default layout behavior (e.g., tabifying dock widgets) can be perceived as a regression if users are accustomed to the previous arrangement, especially when the new behavior is not easily configurable.\n\nKey generalizable points:\n1. **Default parameters control UX-critical behavior**: A single default argument (`tabify=True` vs `False`) in an internal helper can significantly change user-visible layout. When modifying such defaults, consider the impact on existing workflows and expectations.\n2. **Reverting to familiar defaults can be better than forcing new behavior**: When users explicitly request the former behavior and there is no strong reason to enforce the new default, reverting can be the right short-term fix. Longer-term, exposing the behavior as a setting is often best.\n3. **Persistable settings for layout preferences**: UI layout options (tabbed vs non-tabbed docks, panel positions, etc.) should ideally be persistable user preferences rather than hard-coded defaults. That allows experimentation with new defaults without alienating users.\n4. **Documenting behavior changes in release notes**: When adjusting UI defaults, always document them clearly in release notes so users understand why their interface looks different after an upgrade.\n5. **Minimal invasive fix vs. full feature**: In many cases, a minimal change (like flipping a boolean default) is preferable as a quick fix, with a note to later implement a more flexible, configurable solution.\n\nThese patterns apply broadly to any application with dockable/arrangeable UI panels: IDEs, visualization tools, editors, etc.",
        "procedural_memory": [
            "Step-by-step instructions on how to diagnose and fix similar issues.",
            "Step 1: Identify the regression source\n- Listen to user feedback or bug reports indicating a change in UI layout behavior (e.g., panels suddenly become tabbed by default).\n- Reproduce the issue locally by running the application and performing the same actions (e.g., opening or adding dock widgets) to observe the undesired behavior.",
            "Step 2: Locate the layout control logic\n- Search the codebase for the relevant UI components and helpers (e.g., `dock`, `dock widget`, `tabify`, `tabbed`, `QDockWidget`, or similar keywords).\n- Identify the functions or methods that create or add these components to the main window (e.g., a helper like `_add_viewer_dock_widget`).\n- Examine their parameters and defaults: look for booleans controlling layout (like `tabify=True` or `dock_area`, `floating`, etc.).",
            "Step 3: Compare current behavior with historical behavior\n- Use git history (`git blame`, `git log -p`, or GitHub PRs) to see when the default or behavior was last changed.\n- Confirm that the change aligns temporally with the reported regression (e.g., a recent PR changed `tabify=False` to `tabify=True`).",
            "Step 4: Decide on the appropriate fix\n- If the change was unintended or controversial, consider reverting to the previous default (e.g., set `tabify=False` again).\n- If the new behavior is desirable for some users, plan to introduce a user-configurable setting in the future, but implement the quick default fix now to unblock users.\n- Ensure the change still allows explicit control (e.g., keep the `tabify` parameter, only change its default).",
            "Step 5: Implement the fix\n- Change the default argument or configuration value that controls the layout behavior (e.g., `_add_viewer_dock_widget(self, dock_widget, tabify=False)`).\n- Verify that call sites that rely on the default now get the intended behavior (non-tabbed docks), and that explicit uses of the parameter still work as expected.",
            "Step 6: Test the behavior manually and/or add tests\n- Manually run the application and add multiple dock widgets to confirm that they appear as separate (non-tabbed) docks by default.\n- If possible, add or update automated tests to assert the layout behavior (e.g., check the docking state or tabifying state of widgets after addition).",
            "Step 7: Update documentation and release notes\n- Document the change in the appropriate release notes (e.g., \"Make dock widgets non-tabbed\" with reference to the PR/issue number).\n- Optionally, update user documentation to describe the current default behavior and mention any planned configurability.",
            "Step 8: Plan for a long-term, configurable solution\n- Create a follow-up issue or ticket to introduce a persistable user setting for this layout behavior (e.g., a preference: 'Open dock widgets tabbed by default').\n- Design how this preference will be stored (config file, user profile, etc.) and how it will be integrated into the UI (settings dialog, config API)."
        ]
    }
}