{
    "search_index": {
        "description_for_embedding": "Fix for a crash in PokemonGo-Bot where pokemon_catch_worker used a non-existent attribute 'pokemon.num' when logging catch events, causing an AttributeError and making the bot unusable. The fix replaces 'pokemon.num' with the correct 'pokemon.pokemon_id'.",
        "keywords": [
            "PokemonGo-Bot",
            "pokemon_catch_worker",
            "AttributeError",
            "Pokemon object has no attribute num",
            "incorrect attribute name",
            "event logging",
            "pokemon_id vs num",
            "runtime crash",
            "bot unusable",
            "bug fix"
        ]
    },
    "agent_memory": {
        "episodic_memory": "In this incident, the PokemonGo-Bot became unusable due to a runtime crash in the pokemon_catch_worker. When executing the _do_catch method, the code attempted to build an event payload containing a 'pokemon_id' field using 'pokemon.num'. However, the Pokemon model defined attributes 'id' (unique instance ID) and 'pokemon_id' (Pokedex ID), but not 'num'. This mismatch caused an AttributeError: 'Pokemon' object has no attribute 'num' at runtime. The fix was to update the event payload construction in pokemongo_bot/cell_workers/pokemon_catch_worker.py, replacing 'pokemon_id': pokemon.num with 'pokemon_id': pokemon.pokemon_id. This aligns with the actual model definition and prevents the crash. The PR also added the contributor's name (pmquan) to CONTRIBUTORS.md.",
        "semantic_memory": "This case illustrates a common class of bugs where code references an attribute name that does not exist on a data model, often due to refactoring, inconsistent naming conventions, or assumptions about API/SDK structure. Using the wrong attribute may only surface at runtime, especially in dynamically typed languages like Python, leading to exceptions such as AttributeError in normal execution paths. It highlights the importance of: (1) keeping code that constructs event/logging payloads synchronized with model definitions, (2) using clear and consistent naming (e.g., distinguishing between an entity's unique instance ID vs. a logical type or Pokedex ID), and (3) adding tests around frequently executed paths (like catch workflows) that validate the existence of all referenced attributes. This also shows that even \"non-critical\" code like event logging can bring down an entire application if it raises unhandled exceptions.",
        "procedural_memory": [
            "Step-by-step instructions on how to diagnose and fix similar issues.",
            "Step 1: Reproduce the error. Run the workflow or feature (e.g., catching a Pok√©mon) and capture the full stack trace. Confirm the exact exception type (e.g., AttributeError) and the line of code causing the crash.",
            "Step 2: Inspect the failing line. Identify which object and attribute are involved (e.g., 'pokemon.num'). Note both the variable (pokemon) and the attribute name (num).",
            "Step 3: Locate the model definition. Search the codebase for the class or data structure representing that object (e.g., class Pokemon). Verify which attributes are actually defined (e.g., 'id', 'pokemon_id').",
            "Step 4: Determine the intended meaning. Understand what information the code is trying to use (e.g., unique instance ID vs. species/Pokedex ID). Use comments, surrounding code, and other usages in the project to decide the correct attribute.",
            "Step 5: Correct the attribute usage. Replace the invalid attribute reference with the appropriate existing field (e.g., change 'pokemon.num' to 'pokemon.pokemon_id', or remove the field if it is unused). Ensure that the payload or logic matches the application's design and consumers' expectations.",
            "Step 6: Search for similar issues. Grep for the incorrect attribute name (e.g., '.num') in the repository to find and fix any other occurrences that may produce similar runtime errors.",
            "Step 7: Add or update tests. Implement unit or integration tests for the affected workflow (e.g., catch event emission) that exercise the code path and assert that no AttributeError is raised and that the payload uses valid attributes.",
            "Step 8: Run the full test suite and manual check. Execute automated tests and manually run the relevant scenario to ensure the issue is resolved and that the application no longer crashes in this path.",
            "Step 9: Document the fix. Optionally update developer documentation or code comments to clarify the meaning of similar attributes (e.g., 'id' vs. 'pokemon_id') to prevent future confusion."
        ]
    }
}