{
    "search_index": {
        "description_for_embedding": "Home Assistant Tautulli sensor failed to connect for users who configured Tautulli with a non-root Base URL (e.g. /tautulli). The fix updated the pytautulli dependency to a version that supports a configurable path and added a 'path' configuration option to the Tautulli sensor, passing it through to the client so requests hit the correct subpath.",
        "keywords": [
            "tautulli sensor",
            "home assistant",
            "base URL",
            "subpath",
            "reverse proxy",
            "pytautulli 0.5.0",
            "CONF_PATH",
            "HTTP path configuration",
            "API client configuration",
            "connection failure"
        ]
    },
    "agent_memory": {
        "episodic_memory": "In this incident, some Home Assistant users reported that the Tautulli sensor could not reach their Tautulli instance. Investigation showed that these users had configured a 'Base URL' in Tautulli (e.g. '/tautulli'), causing the Tautulli web UI and API to live under a subpath instead of the root. The existing Home Assistant integration assumed Tautulli was always at the root ('/'), so all API calls went to the wrong URL and failed. To resolve this, the Tautulli integration was updated in two ways: (1) The pytautulli dependency was bumped from 0.4.1 to 0.5.0, which added support for a path parameter; (2) The sensor platform schema was extended to include an optional 'path' configuration (CONF_PATH) with a default of an empty string, and this path was passed into the Tautulli client constructor. The default behavior remains unchanged for users without a base URL, while users with a configured base URL can now specify 'path: \"/tautulli\"' (or similar) in configuration.yaml, allowing the sensor to connect successfully. The requirements_all.txt entry for pytautulli was also updated to 0.5.0 to keep global requirements consistent.",
        "semantic_memory": "This fix illustrates a common integration problem: external services are often hosted under a configurable base URL or behind a reverse proxy that introduces a subpath (e.g. '/service', '/tautulli'). If a client or integration assumes that the service is always at the root path '/', it will fail for users who configure a non-root base URL. Robust integrations should support a configurable path component in addition to host, port, and SSL settings, and this support frequently requires both client library support and an exposed configuration option in the main application. When updating to support such features, it's important to (1) bump third-party dependencies to versions that support the new parameter, (2) extend configuration schemas to accept the path, providing sane defaults that preserve backward compatibility, and (3) consistently propagate that configuration into the API client. This pattern generalizes to any HTTP-based integration: always account for the possibility of a non-root base path and avoid hardcoding URL assumptions in the integration.",
        "procedural_memory": [
            "When an integration fails for some users but not others, check for environment-specific configuration differences such as reverse proxies, base URLs, or non-standard paths.",
            "Step 1: Reproduce or inspect the failing configuration. Ask the user how the target service is exposed (host, port, SSL, base URL / subpath, reverse proxy rules) and compare to your integration's URL construction logic.",
            "Step 2: Verify how your code builds the service URL. Look for hardcoded assumptions like 'http(s)://host:port/' and ensure there is a way to add a path segment (e.g. 'http(s)://host:port/base_path/endpoint').",
            "Step 3: Check the underlying client library (e.g. pytautulli) to see if it supports a configurable path or base URL. If not, update or extend the client library to accept a path parameter, and release a new version.",
            "Step 4: Update the dependency version in your integration (e.g. REQUIREMENTS in the component and any global requirements files) to the new client library version that supports the path parameter.",
            "Step 5: Extend your integration's configuration schema to include an optional 'path' or 'base_url' field with a safe default (typically an empty string) so existing users are unaffected. Use the platform's validation utilities to enforce it as a string.",
            "Step 6: Pass the new path configuration through to the client constructor or URL-building logic wherever the client is instantiated, ensuring that the final URLs correctly include the subpath when present.",
            "Step 7: Test both scenarios: (a) default configuration with no path (service at root) and (b) configuration with a non-empty path (e.g. '/tautulli'), verifying that the integration connects and retrieves data successfully in both cases.",
            "Step 8: Update documentation to show the new configuration option, including concrete examples of using the path/base_url setting for users behind reverse proxies or custom base URLs.",
            "Step 9: Run the project's test suite (and add tests if feasible) to ensure the new configuration option is covered and that existing behavior remains unchanged.",
            "Step 10: For future integrations, design configuration to separate host, port, SSL, and path/base URL explicitly, and avoid constructing URLs by naive string concatenation that assumes root paths."
        ]
    }
}